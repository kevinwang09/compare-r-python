<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Compare R and Python: data frame manipulations</title>

<script src="site_libs/header-attrs-2.6.4/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Compare R and Python</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basic concepts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://kevinwang09.github.io/compare-r-python/base.html">lists, vectors, dictionaries</a>
    </li>
    <li>
      <a href="https://kevinwang09.github.io/compare-r-python/dataframe.html">data frames</a>
    </li>
    <li>
      <a href="https://kevinwang09.github.io/compare-r-python/functions.html">functions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Supervised learning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">wrapping into workflows</li>
    <li>
      <a href="https://kevinwang09.github.io/compare-r-python/workflows.html"></a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kevinwang09/compare-r-python">
    <span class="fas fa-code"></span>
     
    Source code
  </a>
</li>
<li>
  <a href="https://kevinwang09.github.io">
    <span class="fas fa-user-tie"></span>
     
    About me
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Compare R and Python: data frame manipulations</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#creating-a-data-frame-manually">Creating a data frame manually</a></li>
<li><a href="#reading-data-frames">Reading data frames</a></li>
<li><a href="#saving-data-frames">Saving data frames</a></li>
<li><a href="#adding-new-columns">Adding new columns</a></li>
<li><a href="#previewing-and-describing-data">Previewing and describing data</a></li>
<li><a href="#grouped-operations">Grouped operations</a></li>
<li><a href="#handling-of-missing-values">Handling of missing values</a></li>
</ul>
</div>

<div id="creating-a-data-frame-manually" class="section level1">
<h1>Creating a data frame manually</h1>
<div id="r" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>data = data.frame(
  x = 1:5, 
  y = 2:6,
  row.names = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))

print(data)</code></pre>
<pre><code>##   x y
## a 1 2
## b 2 3
## c 3 4
## d 4 5
## e 5 6</code></pre>
</div>
<div id="python" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>import pandas as pd
data = pd.DataFrame(
  {&quot;x&quot;: list(range(1, 6)),
   &quot;y&quot;: list(range(2, 7))}, 
  index = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;])
print(data)</code></pre>
<pre><code>##    x  y
## a  1  2
## b  2  3
## c  3  4
## d  4  5
## e  5  6</code></pre>
</div>
<div style="margin-bottom:400px;">

</div>
</div>
<div id="reading-data-frames" class="section level1">
<h1>Reading data frames</h1>
<div id="r-1" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>library(readr)
data = readr::read_csv(&quot;data/penguins_complete.csv&quot;)</code></pre>
</div>
<div id="python-1" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>import pandas as pd
data = pd.read_csv(&quot;data/penguins_complete.csv&quot;)</code></pre>
</div>
</div>
<div id="saving-data-frames" class="section level1">
<h1>Saving data frames</h1>
<div id="r-2" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>readr::write_csv(x = data, file = &quot;data/penguins_complete.csv&quot;)</code></pre>
</div>
<div id="python-2" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>data.to_csv(path_or_buf = &quot;data/penguins_complete2.csv&quot;)
## </code></pre>
</div>
<div id="index-based-selection" class="section level2">
<h2>Index-based selection</h2>
<p>In <code>R</code>, both index-based and label-based subsetting are performed through <code>[,]</code>. In <code>Python</code>, this is separated into <code>iloc</code> and <code>loc</code> respectively.</p>
<div id="r-3" class="section level3 left">
<h3>R</h3>
<pre class="r"><code>## First row
data[1,]</code></pre>
<pre><code>## # A tibble: 1 x 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torge…           39.1          18.7              181        3750 male 
## # … with 1 more variable: year &lt;dbl&gt;</code></pre>
<pre class="r"><code>data[c(1,3,5), c(1,3,5)]</code></pre>
<pre><code>## # A tibble: 3 x 3
##   species bill_length_mm flipper_length_mm
##   &lt;chr&gt;            &lt;dbl&gt;             &lt;dbl&gt;
## 1 Adelie            39.1               181
## 2 Adelie            40.3               195
## 3 Adelie            39.3               190</code></pre>
</div>
<div id="python-3" class="section level3 right">
<h3>Python</h3>
<pre class="python"><code>## First row
data.iloc[0,:]</code></pre>
<pre><code>## species                 Adelie
## island               Torgersen
## bill_length_mm            39.1
## bill_depth_mm             18.7
## flipper_length_mm          181
## body_mass_g               3750
## sex                       male
## year                      2007
## Name: 0, dtype: object</code></pre>
<pre class="python"><code>data.iloc[[0,2,4],[0,2,4]]</code></pre>
<pre><code>##   species  bill_length_mm  flipper_length_mm
## 0  Adelie            39.1                181
## 2  Adelie            40.3                195
## 4  Adelie            39.3                190</code></pre>
</div>
<div style="margin-bottom:600px;">

</div>
</div>
<div id="label-based-selection" class="section level2">
<h2>Label-based selection</h2>
<p>In <code>R</code>, both index-based and label-based subsetting are performed through <code>[,]</code>. In <code>Python</code>, this is separated into <code>iloc</code> and <code>loc</code> respectively.</p>
<div id="r-4" class="section level3 left">
<h3>R</h3>
<pre class="r"><code>## First five rows from the &quot;species&quot; column
data[1:5, &quot;species&quot;]</code></pre>
<pre><code>## # A tibble: 5 x 1
##   species
##   &lt;chr&gt;  
## 1 Adelie 
## 2 Adelie 
## 3 Adelie 
## 4 Adelie 
## 5 Adelie</code></pre>
</div>
<div id="python-4" class="section level3 right">
<h3>Python</h3>
<pre class="python"><code>## First five rows from the &quot;species&quot; column, return as Series
data.loc[0:4,&quot;species&quot;]</code></pre>
<pre><code>## 0    Adelie
## 1    Adelie
## 2    Adelie
## 3    Adelie
## 4    Adelie
## Name: species, dtype: object</code></pre>
</div>
<div style="margin-bottom:400px;">

</div>
</div>
<div id="a-note-about-loc-and-iloc" class="section level2">
<h2>A note about <code>loc</code> and <code>iloc</code></h2>
<p>In Python, <code>loc</code>’s label-querying capabilities means that it will subset <strong>inclusively</strong> on the indices. This means that even if we use the same indices in the code, but depending on which method is used, we can get different results.</p>
<pre class="python"><code>data.loc[0:4,&quot;species&quot;]</code></pre>
<pre><code>## 0    Adelie
## 1    Adelie
## 2    Adelie
## 3    Adelie
## 4    Adelie
## Name: species, dtype: object</code></pre>
<pre class="python"><code>data.iloc[0:4,1]</code></pre>
<pre><code>## 0    Torgersen
## 1    Torgersen
## 2    Torgersen
## 3    Torgersen
## Name: island, dtype: object</code></pre>
</div>
<div id="conditional-selection" class="section level2">
<h2>Conditional selection</h2>
<div id="r-5" class="section level3 left">
<h3>R</h3>
<pre class="r"><code>## Base R solution
data[(data$species == &quot;Adelie&quot;) &amp; (data$bill_depth_mm &gt; 21), ]</code></pre>
<pre><code>## # A tibble: 6 x 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torge…           38.6          21.2              191        3800 male 
## 2 Adelie  Torge…           34.6          21.1              198        4400 male 
## 3 Adelie  Torge…           46            21.5              194        4200 male 
## 4 Adelie  Dream            39.2          21.1              196        4150 male 
## 5 Adelie  Dream            42.3          21.2              191        4150 male 
## 6 Adelie  Biscoe           41.3          21.1              195        4400 male 
## # … with 1 more variable: year &lt;dbl&gt;</code></pre>
<pre class="r"><code>##
##
data[data$species %in% c(&quot;Adelie&quot;, &quot;Chinstrap&quot;), ]</code></pre>
<pre><code>## # A tibble: 214 x 8
##    species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torge…           39.1          18.7              181        3750
##  2 Adelie  Torge…           39.5          17.4              186        3800
##  3 Adelie  Torge…           40.3          18                195        3250
##  4 Adelie  Torge…           36.7          19.3              193        3450
##  5 Adelie  Torge…           39.3          20.6              190        3650
##  6 Adelie  Torge…           38.9          17.8              181        3625
##  7 Adelie  Torge…           39.2          19.6              195        4675
##  8 Adelie  Torge…           41.1          17.6              182        3200
##  9 Adelie  Torge…           38.6          21.2              191        3800
## 10 Adelie  Torge…           34.6          21.1              198        4400
## # … with 204 more rows, and 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
<pre class="r"><code>library(dplyr)
data %&gt;% filter((species == &quot;Adelie&quot;) &amp; (bill_depth_mm &gt; 21))</code></pre>
<pre><code>## # A tibble: 6 x 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torge…           38.6          21.2              191        3800 male 
## 2 Adelie  Torge…           34.6          21.1              198        4400 male 
## 3 Adelie  Torge…           46            21.5              194        4200 male 
## 4 Adelie  Dream            39.2          21.1              196        4150 male 
## 5 Adelie  Dream            42.3          21.2              191        4150 male 
## 6 Adelie  Biscoe           41.3          21.1              195        4400 male 
## # … with 1 more variable: year &lt;dbl&gt;</code></pre>
<pre class="r"><code>data %&gt;% filter(species %in% c(&quot;Adelie&quot;, &quot;Chinstrap&quot;))</code></pre>
<pre><code>## # A tibble: 214 x 8
##    species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torge…           39.1          18.7              181        3750
##  2 Adelie  Torge…           39.5          17.4              186        3800
##  3 Adelie  Torge…           40.3          18                195        3250
##  4 Adelie  Torge…           36.7          19.3              193        3450
##  5 Adelie  Torge…           39.3          20.6              190        3650
##  6 Adelie  Torge…           38.9          17.8              181        3625
##  7 Adelie  Torge…           39.2          19.6              195        4675
##  8 Adelie  Torge…           41.1          17.6              182        3200
##  9 Adelie  Torge…           38.6          21.2              191        3800
## 10 Adelie  Torge…           34.6          21.1              198        4400
## # … with 204 more rows, and 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div id="python-5" class="section level3 right">
<h3>Python</h3>
<pre class="python"><code>## Using loc
data.loc[(data.species == &quot;Adelie&quot;) &amp; (data.bill_depth_mm &gt; 21)]
##
##
##</code></pre>
<pre><code>##    species     island  bill_length_mm  ...  body_mass_g   sex  year
## 8   Adelie  Torgersen            38.6  ...         3800  male  2007
## 9   Adelie  Torgersen            34.6  ...         4400  male  2007
## 14  Adelie  Torgersen            46.0  ...         4200  male  2007
## 30  Adelie      Dream            39.2  ...         4150  male  2007
## 43  Adelie      Dream            42.3  ...         4150  male  2007
## 55  Adelie     Biscoe            41.3  ...         4400  male  2008
## 
## [6 rows x 8 columns]</code></pre>
<pre class="python"><code>substypes = [&quot;Adelie&quot;, &quot;Chinstrap&quot;]
data.loc[(data.species.isin(substypes))]</code></pre>
<pre><code>##        species     island  bill_length_mm  ...  body_mass_g     sex  year
## 0       Adelie  Torgersen            39.1  ...         3750    male  2007
## 1       Adelie  Torgersen            39.5  ...         3800  female  2007
## 2       Adelie  Torgersen            40.3  ...         3250  female  2007
## 3       Adelie  Torgersen            36.7  ...         3450  female  2007
## 4       Adelie  Torgersen            39.3  ...         3650    male  2007
## ..         ...        ...             ...  ...          ...     ...   ...
## 328  Chinstrap      Dream            55.8  ...         4000    male  2009
## 329  Chinstrap      Dream            43.5  ...         3400  female  2009
## 330  Chinstrap      Dream            49.6  ...         3775    male  2009
## 331  Chinstrap      Dream            50.8  ...         4100    male  2009
## 332  Chinstrap      Dream            50.2  ...         3775  female  2009
## 
## [214 rows x 8 columns]</code></pre>
<pre class="python"><code>##
##
## Using query()
data.query(&#39;(species == &quot;Adelie&quot;) &amp; (bill_depth_mm &gt; 21)&#39;)
##
##
##</code></pre>
<pre><code>##    species     island  bill_length_mm  ...  body_mass_g   sex  year
## 8   Adelie  Torgersen            38.6  ...         3800  male  2007
## 9   Adelie  Torgersen            34.6  ...         4400  male  2007
## 14  Adelie  Torgersen            46.0  ...         4200  male  2007
## 30  Adelie      Dream            39.2  ...         4150  male  2007
## 43  Adelie      Dream            42.3  ...         4150  male  2007
## 55  Adelie     Biscoe            41.3  ...         4400  male  2008
## 
## [6 rows x 8 columns]</code></pre>
<pre class="python"><code>data.query(&#39;species == @substypes&#39;)</code></pre>
<pre><code>##        species     island  bill_length_mm  ...  body_mass_g     sex  year
## 0       Adelie  Torgersen            39.1  ...         3750    male  2007
## 1       Adelie  Torgersen            39.5  ...         3800  female  2007
## 2       Adelie  Torgersen            40.3  ...         3250  female  2007
## 3       Adelie  Torgersen            36.7  ...         3450  female  2007
## 4       Adelie  Torgersen            39.3  ...         3650    male  2007
## ..         ...        ...             ...  ...          ...     ...   ...
## 328  Chinstrap      Dream            55.8  ...         4000    male  2009
## 329  Chinstrap      Dream            43.5  ...         3400  female  2009
## 330  Chinstrap      Dream            49.6  ...         3775    male  2009
## 331  Chinstrap      Dream            50.8  ...         4100    male  2009
## 332  Chinstrap      Dream            50.2  ...         3775  female  2009
## 
## [214 rows x 8 columns]</code></pre>
</div>
<div style="margin-bottom:2700px;">

</div>
</div>
</div>
<div id="adding-new-columns" class="section level1">
<h1>Adding new columns</h1>
<div id="r-6" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>data[&quot;body_mass_kg&quot;] = data$body_mass_g/1000

## dplyr solution
data %&gt;% mutate(body_mass_kg = body_mass_g/1000)</code></pre>
<pre><code>## # A tibble: 333 x 9
##    species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torge…           39.1          18.7              181        3750
##  2 Adelie  Torge…           39.5          17.4              186        3800
##  3 Adelie  Torge…           40.3          18                195        3250
##  4 Adelie  Torge…           36.7          19.3              193        3450
##  5 Adelie  Torge…           39.3          20.6              190        3650
##  6 Adelie  Torge…           38.9          17.8              181        3625
##  7 Adelie  Torge…           39.2          19.6              195        4675
##  8 Adelie  Torge…           41.1          17.6              182        3200
##  9 Adelie  Torge…           38.6          21.2              191        3800
## 10 Adelie  Torge…           34.6          21.1              198        4400
## # … with 323 more rows, and 3 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;,
## #   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
<div id="python-6" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>data[&quot;body_mass_kg&quot;] = data.body_mass_g/1000

data.assign(body_mass_kg = lambda x: x.body_mass_g/1000)</code></pre>
<pre><code>##        species     island  bill_length_mm  ...     sex  year  body_mass_kg
## 0       Adelie  Torgersen            39.1  ...    male  2007         3.750
## 1       Adelie  Torgersen            39.5  ...  female  2007         3.800
## 2       Adelie  Torgersen            40.3  ...  female  2007         3.250
## 3       Adelie  Torgersen            36.7  ...  female  2007         3.450
## 4       Adelie  Torgersen            39.3  ...    male  2007         3.650
## ..         ...        ...             ...  ...     ...   ...           ...
## 328  Chinstrap      Dream            55.8  ...    male  2009         4.000
## 329  Chinstrap      Dream            43.5  ...  female  2009         3.400
## 330  Chinstrap      Dream            49.6  ...    male  2009         3.775
## 331  Chinstrap      Dream            50.8  ...    male  2009         4.100
## 332  Chinstrap      Dream            50.2  ...  female  2009         3.775
## 
## [333 rows x 9 columns]</code></pre>
</div>
<div style="margin-bottom:1000px;">

</div>
</div>
<div id="previewing-and-describing-data" class="section level1">
<h1>Previewing and describing data</h1>
<div id="r-7" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>head(data)</code></pre>
<pre><code>## # A tibble: 6 x 9
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torge…           39.1          18.7              181        3750 male 
## 2 Adelie  Torge…           39.5          17.4              186        3800 fema…
## 3 Adelie  Torge…           40.3          18                195        3250 fema…
## 4 Adelie  Torge…           36.7          19.3              193        3450 fema…
## 5 Adelie  Torge…           39.3          20.6              190        3650 male 
## 6 Adelie  Torge…           38.9          17.8              181        3625 fema…
## # … with 2 more variables: year &lt;dbl&gt;, body_mass_kg &lt;dbl&gt;</code></pre>
<pre class="r"><code>summary(data)</code></pre>
<pre><code>##    species             island          bill_length_mm  bill_depth_mm  
##  Length:333         Length:333         Min.   :32.10   Min.   :13.10  
##  Class :character   Class :character   1st Qu.:39.50   1st Qu.:15.60  
##  Mode  :character   Mode  :character   Median :44.50   Median :17.30  
##                                        Mean   :43.99   Mean   :17.16  
##                                        3rd Qu.:48.60   3rd Qu.:18.70  
##                                        Max.   :59.60   Max.   :21.50  
##  flipper_length_mm  body_mass_g       sex                 year     
##  Min.   :172       Min.   :2700   Length:333         Min.   :2007  
##  1st Qu.:190       1st Qu.:3550   Class :character   1st Qu.:2007  
##  Median :197       Median :4050   Mode  :character   Median :2008  
##  Mean   :201       Mean   :4207                      Mean   :2008  
##  3rd Qu.:213       3rd Qu.:4775                      3rd Qu.:2009  
##  Max.   :231       Max.   :6300                      Max.   :2009  
##   body_mass_kg  
##  Min.   :2.700  
##  1st Qu.:3.550  
##  Median :4.050  
##  Mean   :4.207  
##  3rd Qu.:4.775  
##  Max.   :6.300</code></pre>
<pre class="r"><code>glimpse(data)</code></pre>
<pre><code>## Rows: 333
## Columns: 9
## $ species           &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;…
## $ island            &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;,…
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, 36.7, 39.3, 38.9, 39.2, 41.1, 38.…
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, 19.3, 20.6, 17.8, 19.6, 17.6, 21.…
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, 193, 190, 181, 195, 182, 191, 198, 1…
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, 3450, 3650, 3625, 4675, 3200, 380…
## $ sex               &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;fema…
## $ year              &lt;dbl&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 200…
## $ body_mass_kg      &lt;dbl&gt; 3.750, 3.800, 3.250, 3.450, 3.650, 3.625, 4.675, 3.…</code></pre>
<pre class="r"><code>dim(data)</code></pre>
<pre><code>## [1] 333   9</code></pre>
<pre class="r"><code>unique(data$species)</code></pre>
<pre><code>## [1] &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Chinstrap&quot;</code></pre>
<pre class="r"><code>##
table(data$species)</code></pre>
<pre><code>## 
##    Adelie Chinstrap    Gentoo 
##       146        68       119</code></pre>
</div>
<div id="python-7" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>data.head()
##
##
##
##
##
##</code></pre>
<pre><code>##   species     island  bill_length_mm  ...     sex  year  body_mass_kg
## 0  Adelie  Torgersen            39.1  ...    male  2007          3.75
## 1  Adelie  Torgersen            39.5  ...  female  2007          3.80
## 2  Adelie  Torgersen            40.3  ...  female  2007          3.25
## 3  Adelie  Torgersen            36.7  ...  female  2007          3.45
## 4  Adelie  Torgersen            39.3  ...    male  2007          3.65
## 
## [5 rows x 9 columns]</code></pre>
<pre class="python"><code>data.describe()
##
##
##
##
##
##
##
##
##
##
##
##
##
##
##</code></pre>
<pre><code>##        bill_length_mm  bill_depth_mm  ...         year  body_mass_kg
## count      333.000000     333.000000  ...   333.000000    333.000000
## mean        43.992793      17.164865  ...  2008.042042      4.207057
## std          5.468668       1.969235  ...     0.812944      0.805216
## min         32.100000      13.100000  ...  2007.000000      2.700000
## 25%         39.500000      15.600000  ...  2007.000000      3.550000
## 50%         44.500000      17.300000  ...  2008.000000      4.050000
## 75%         48.600000      18.700000  ...  2009.000000      4.775000
## max         59.600000      21.500000  ...  2009.000000      6.300000
## 
## [8 rows x 6 columns]</code></pre>
<pre class="python"><code>data.info()
##
##
##
##
##
##
##</code></pre>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 333 entries, 0 to 332
## Data columns (total 9 columns):
## species              333 non-null object
## island               333 non-null object
## bill_length_mm       333 non-null float64
## bill_depth_mm        333 non-null float64
## flipper_length_mm    333 non-null int64
## body_mass_g          333 non-null int64
## sex                  333 non-null object
## year                 333 non-null int64
## body_mass_kg         333 non-null float64
## dtypes: float64(3), int64(3), object(3)
## memory usage: 23.5+ KB</code></pre>
<pre class="python"><code>data.shape</code></pre>
<pre><code>## (333, 9)</code></pre>
<pre class="python"><code>data.species.unique()</code></pre>
<pre><code>## array([&#39;Adelie&#39;, &#39;Gentoo&#39;, &#39;Chinstrap&#39;], dtype=object)</code></pre>
<pre class="python"><code>data.species.value_counts()</code></pre>
<pre><code>## Adelie       146
## Gentoo       119
## Chinstrap     68
## Name: species, dtype: int64</code></pre>
</div>
<div style="margin-bottom:2000px;">

</div>
</div>
<div id="grouped-operations" class="section level1">
<h1>Grouped operations</h1>
<p>The <code>dplyr</code> package (a part of the <code>tidyverse</code>) contains important functions that makes the manipulation of data.frame very easy. A very important part of the dplyr package is the use of the pipe operator, <code>%&gt;%</code>. Together with the use of spaces and line breaks, this often makes the <code>R</code> code more readable, so that one can read the code from top to bottom and left to right, i.e. consistent with how we would structure an English sentence. This design framework to make readable codes is a very important reason of why <code>R</code> has gained a renewed popularity in data science.</p>
<p>In comparison, <code>Python</code> (<code>pandas</code>) also adopts similar principle, but the structuring of the codes is not as consistent.</p>
<div id="r-8" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>library(dplyr)
data %&gt;% 
  group_by(species) %&gt;% 
  tally()</code></pre>
<pre><code>## # A tibble: 3 x 2
##   species       n
##   &lt;chr&gt;     &lt;int&gt;
## 1 Adelie      146
## 2 Chinstrap    68
## 3 Gentoo      119</code></pre>
<pre class="r"><code>data %&gt;% 
  group_by(species) %&gt;% 
  summarise(mean_bill_length = mean(bill_length_mm))</code></pre>
<pre><code>## # A tibble: 3 x 2
##   species   mean_bill_length
##   &lt;chr&gt;                &lt;dbl&gt;
## 1 Adelie                38.8
## 2 Chinstrap             48.8
## 3 Gentoo                47.6</code></pre>
<pre class="r"><code>data %&gt;% 
  group_by(species) %&gt;% 
  summarise_if(.predicate = is.numeric, .funs = mean)</code></pre>
<pre><code>## # A tibble: 3 x 7
##   species bill_length_mm bill_depth_mm flipper_length_… body_mass_g  year
##   &lt;chr&gt;            &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Adelie            38.8          18.3             190.       3706. 2008.
## 2 Chinst…           48.8          18.4             196.       3733. 2008.
## 3 Gentoo            47.6          15.0             217.       5092. 2008.
## # … with 1 more variable: body_mass_kg &lt;dbl&gt;</code></pre>
<pre class="r"><code>data %&gt;% 
  group_by(species) %&gt;% 
  summarise(mean_bill_length_top1 = bill_length_mm[1])</code></pre>
<pre><code>## # A tibble: 3 x 2
##   species   mean_bill_length_top1
##   &lt;chr&gt;                     &lt;dbl&gt;
## 1 Adelie                     39.1
## 2 Chinstrap                  46.5
## 3 Gentoo                     46.1</code></pre>
<pre class="r"><code>data %&gt;% 
  group_by(species, sex) %&gt;% 
  summarise(longest = bill_length_mm[bill_length_mm == max(bill_length_mm)])</code></pre>
<pre><code>## # A tibble: 6 x 3
## # Groups:   species [3]
##   species   sex    longest
##   &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;
## 1 Adelie    female    42.2
## 2 Adelie    male      46  
## 3 Chinstrap female    58  
## 4 Chinstrap male      55.8
## 5 Gentoo    female    50.5
## 6 Gentoo    male      59.6</code></pre>
<pre class="r"><code>data %&gt;% 
  group_by(species) %&gt;% 
  summarise_at(.vars = vars(bill_length_mm),
               .funs = lst(min, max, mean, length))</code></pre>
<pre><code>## # A tibble: 3 x 5
##   species     min   max  mean length
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
## 1 Adelie     32.1  46    38.8    146
## 2 Chinstrap  40.9  58    48.8     68
## 3 Gentoo     40.9  59.6  47.6    119</code></pre>
</div>
<div id="python-8" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>data.groupby(&quot;species&quot;).species.count()
##
##
##</code></pre>
<pre><code>## species
## Adelie       146
## Chinstrap     68
## Gentoo       119
## Name: species, dtype: int64</code></pre>
<pre class="python"><code>data.groupby(&quot;species&quot;)[&quot;bill_length_mm&quot;].mean()
##
##
##</code></pre>
<pre><code>## species
## Adelie       38.823973
## Chinstrap    48.833824
## Gentoo       47.568067
## Name: bill_length_mm, dtype: float64</code></pre>
<pre class="python"><code>data.groupby(&quot;species&quot;).mean()
##
##
##</code></pre>
<pre><code>##            bill_length_mm  bill_depth_mm  ...         year  body_mass_kg
## species                                   ...                           
## Adelie          38.823973      18.347260  ...  2008.054795      3.706164
## Chinstrap       48.833824      18.420588  ...  2007.970588      3.733088
## Gentoo          47.568067      14.996639  ...  2008.067227      5.092437
## 
## [3 rows x 6 columns]</code></pre>
<pre class="python"><code>data.groupby(&quot;species&quot;).apply(lambda x: x.bill_length_mm.iloc[0])
##
##
##</code></pre>
<pre><code>## species
## Adelie       39.1
## Chinstrap    46.5
## Gentoo       46.1
## dtype: float64</code></pre>
<pre class="python"><code>data.groupby([&quot;species&quot;, &quot;sex&quot;]).apply(lambda x: x.loc[x.bill_length_mm.idxmax(), &quot;bill_length_mm&quot;])
##
##
##</code></pre>
<pre><code>## species    sex   
## Adelie     female    42.2
##            male      46.0
## Chinstrap  female    58.0
##            male      55.8
## Gentoo     female    50.5
##            male      59.6
## dtype: float64</code></pre>
<pre class="python"><code>data.groupby(&quot;species&quot;).bill_length_mm.agg([min, max, &quot;mean&quot;, &quot;size&quot;])</code></pre>
<pre><code>##             min   max       mean  size
## species                               
## Adelie     32.1  46.0  38.823973   146
## Chinstrap  40.9  58.0  48.833824    68
## Gentoo     40.9  59.6  47.568067   119</code></pre>
</div>
<div style="margin-bottom:2000px;">

</div>
</div>
<div id="handling-of-missing-values" class="section level1">
<h1>Handling of missing values</h1>
<div id="r-9" class="section level2 left">
<h2>R</h2>
<pre class="r"><code>library(dplyr)
missing_data = readr::read_csv(&quot;data/penguins.csv&quot;)
missing_data %&gt;% 
  filter(is.na(bill_length_mm))</code></pre>
<pre><code>## # A tibble: 2 x 8
##   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torge…             NA            NA               NA          NA &lt;NA&gt; 
## 2 Gentoo  Biscoe             NA            NA               NA          NA &lt;NA&gt; 
## # … with 1 more variable: year &lt;dbl&gt;</code></pre>
<pre class="r"><code>missing_data %&gt;% 
  dplyr::mutate(bill_length_mm = coalesce(bill_length_mm, 0))</code></pre>
<pre><code>## # A tibble: 344 x 8
##    species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torge…           39.1          18.7              181        3750
##  2 Adelie  Torge…           39.5          17.4              186        3800
##  3 Adelie  Torge…           40.3          18                195        3250
##  4 Adelie  Torge…            0            NA                 NA          NA
##  5 Adelie  Torge…           36.7          19.3              193        3450
##  6 Adelie  Torge…           39.3          20.6              190        3650
##  7 Adelie  Torge…           38.9          17.8              181        3625
##  8 Adelie  Torge…           39.2          19.6              195        4675
##  9 Adelie  Torge…           34.1          18.1              193        3475
## 10 Adelie  Torge…           42            20.2              190        4250
## # … with 334 more rows, and 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div id="python-9" class="section level2 right">
<h2>Python</h2>
<pre class="python"><code>missing_data = pd.read_csv(&quot;data/penguins.csv&quot;)
##
##
##
##
##
missing_data[pd.isnull(missing_data.bill_length_mm)]</code></pre>
<pre><code>##     species     island  bill_length_mm  ...  body_mass_g  sex  year
## 3    Adelie  Torgersen             NaN  ...          NaN  NaN  2007
## 271  Gentoo     Biscoe             NaN  ...          NaN  NaN  2009
## 
## [2 rows x 8 columns]</code></pre>
<pre class="python"><code>missing_data.bill_length_mm.fillna(0)</code></pre>
<pre><code>## 0      39.1
## 1      39.5
## 2      40.3
## 3       0.0
## 4      36.7
##        ... 
## 339    55.8
## 340    43.5
## 341    49.6
## 342    50.8
## 343    50.2
## Name: bill_length_mm, Length: 344, dtype: float64</code></pre>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
